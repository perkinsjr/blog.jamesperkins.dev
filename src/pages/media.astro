---
import DefaultPageLayout from '$/layouts/default.astro'
import MediaPreviewList from '$/components/MediaPreviewList.astro'
// import posts from '$/data/astro-media.json'

let title = 'YouTube and Podcast Episodes';
let description = 'Find my podcast episodes and YouTube videos all in one spot!'

const response = await fetch('https://raw.githubusercontent.com/perkinsjr/blog.jamesperkins.dev/main/src/data/astro-media.json')
const allPosts = await response.json()
const sortedPosts = allPosts.sort((a, b) => new Date(b.date) - new Date(a.date))
---
<DefaultPageLayout content={{ title, description }}>
    <MediaPreviewList posts={sortedPosts} />
</DefaultPageLayout>
